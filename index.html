<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finanças Pessoais | Controle Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --success: #2ecc71;
            --success-dark: #27ae60;
            --danger: #e74c3c;
            --danger-dark: #c0392b;
            --warning: #f39c12;
            --warning-dark: #d35400;
            --info: #17a2b8;
            --info-dark: #148a9c;
            --future: #9b59b6;
            --future-dark: #8e44ad;
            --dark-text: #2c3e50;
            --light-text: #ecf0f1;
            --bg-light: #f5f7fa;
            --card-light: #ffffff;
            --border-light: #ddd;
            --bg-dark: #1a1a2e;
            --card-dark: #16213e;
            --border-dark: #0f3460;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: var(--transition);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            color: var(--dark-text);
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }

        body.dark-mode {
            background-color: var(--bg-dark);
            color: var(--light-text);
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border-light);
        }

        body.dark-mode header {
            border-bottom: 1px solid var(--border-dark);
        }

        h1, h2, h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        body.dark-mode h1, 
        body.dark-mode h2, 
        body.dark-mode h3 {
            color: var(--light-text);
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--dark-text);
        }

        body.dark-mode .theme-toggle {
            color: var(--light-text);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: var(--card-light);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        body.dark-mode .card {
            background-color: var(--card-dark);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-light);
        }

        body.dark-mode .card-header {
            border-bottom: 1px solid var(--border-dark);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .card-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 10px 0;
            text-align: center;
        }

        .positive {
            color: var(--success);
        }

        .negative {
            color: var(--danger);
        }

        .neutral {
            color: var(--info);
        }

        .future {
            color: var(--future);
        }

        .sections {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 992px) {
            .sections {
                grid-template-columns: 1fr 1fr;
            }
        }

        .section {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-light);
            border-radius: 5px;
            font-size: 1rem;
            background-color: var(--card-light);
            color: var(--dark-text);
        }

        body.dark-mode input,
        body.dark-mode select,
        body.dark-mode textarea {
            border: 1px solid var(--border-dark);
            background-color: var(--card-dark);
            color: var(--light-text);
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: var(--transition);
        }

        button:hover {
            background-color: var(--primary-dark);
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: var(--danger-dark);
        }

        .btn-warning {
            background-color: var(--warning);
        }

        .btn-warning:hover {
            background-color: var(--warning-dark);
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: var(--success-dark);
        }

        .btn-info {
            background-color: var(--info);
        }

        .btn-info:hover {
            background-color: var(--info-dark);
        }

        .btn-future {
            background-color: var(--future);
        }

        .btn-future:hover {
            background-color: var(--future-dark);
        }

        .transactions {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--border-light);
        }

        body.dark-mode .transaction-item {
            border-bottom: 1px solid var(--border-dark);
        }

        .transaction-item:hover {
            background-color: rgba(0, 0, 0, 0.03);
        }

        body.dark-mode .transaction-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .transaction-desc {
            flex-grow: 1;
            margin-right: 15px;
        }

        .transaction-value {
            font-weight: 500;
            margin-right: 15px;
        }

        .transaction-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 5px 10px;
            font-size: 0.9rem;
        }

        .empty-message {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-light);
            flex-wrap: wrap;
        }

        body.dark-mode .tabs {
            border-bottom: 1px solid var(--border-dark);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .summary-card {
            background-color: var(--card-light);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .summary-card {
            background-color: var(--card-dark);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .summary-title {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #7f8c8d;
        }

        .summary-value {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .credit-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: 5px;
        }

        body.dark-mode .credit-info {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .form-row {
            display: flex;
            gap: 10px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .badge {
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .badge-success {
            background-color: var(--success);
            color: white;
        }

        .badge-warning {
            background-color: var(--warning);
            color: white;
        }

        .badge-danger {
            background-color: var(--danger);
            color: white;
        }

        .badge-future {
            background-color: var(--future);
            color: white;
        }

        .profile-section {
            margin-bottom: 30px;
        }

        .cycle-section {
            margin-bottom: 30px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--card-light);
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
        }

        body.dark-mode .modal-content {
            background-color: var(--card-dark);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-light);
        }

        body.dark-mode .modal-header {
            border-bottom: 1px solid var(--border-dark);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-text);
        }

        body.dark-mode .close-modal {
            color: var(--light-text);
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .cycle-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: 8px;
        }

        body.dark-mode .cycle-info {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .cycle-dates {
            display: flex;
            gap: 20px;
        }

        .cycle-date {
            text-align: center;
        }

        .cycle-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .cycle-value {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        body.dark-mode .progress-bar {
            background-color: #2c3e50;
        }

        .progress {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--bg-light);
        }

        body.dark-mode .login-container {
            background-color: var(--bg-dark);
        }

        .login-form {
            background-color: var(--card-light);
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            width: 90%;
            max-width: 400px;
        }

        body.dark-mode .login-form {
            background-color: var(--card-dark);
        }

        .login-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }

        body.dark-mode .login-title {
            color: var(--light-text);
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .cycle-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }

        .current-cycle {
            font-weight: 600;
            padding: 5px 10px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: 5px;
        }

        body.dark-mode .current-cycle {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .login-error {
            color: var(--danger);
            text-align: center;
            margin-top: 10px;
            font-size: 0.9rem;
            display: none;
        }

        .status-badge {
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 12px;
            margin-left: 8px;
        }

        .status-pending {
            background-color: var(--warning);
            color: white;
        }

        .status-completed {
            background-color: var(--success);
            color: white;
        }

        .future-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .toggle-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            border: 1px solid var(--border-light);
            border-radius: 5px;
            cursor: pointer;
        }

        body.dark-mode .toggle-option {
            border: 1px solid var(--border-dark);
        }

        .toggle-option.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .future-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .future-summary-item {
            background-color: rgba(155, 89, 182, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        body.dark-mode .future-summary-item {
            background-color: rgba(155, 89, 182, 0.2);
        }

        .future-summary-title {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .future-summary-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--future);
        }
    </style>
</head>
<body>
    <div id="login-page" class="login-container">
        <div class="login-form">
            <h2 class="login-title">Controle Financeiro Pessoal</h2>
            <div class="form-group">
                <label for="user-name">Nome</label>
                <input type="text" id="user-name" placeholder="Seu nome" required>
            </div>
            <div class="form-group">
                <label for="user-email">Email</label>
                <input type="email" id="user-email" placeholder="seu@email.com" required>
            </div>
            <div class="form-group">
                <label for="user-currency">Moeda</label>
                <select id="user-currency">
                    <option value="BRL">Real Brasileiro (R$)</option>
                    <option value="USD">Dólar Americano ($)</option>
                    <option value="EUR">Euro (€)</option>
                </select>
            </div>
            <div id="login-error" class="login-error">Por favor, preencha todos os campos.</div>
            <button id="login-btn" class="btn-success" style="width: 100%; margin-top: 15px;">Acessar Minhas Finanças</button>
        </div>
    </div>

    <div id="app-container" class="app-container hidden">
        <header>
            <h1>Controle Financeiro Pessoal</h1>
            <div>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="profile-btn" style="margin-left: 10px;">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </header>

        <div class="profile-section">
            <div class="profile-info">
                <div class="profile-avatar" id="profile-avatar">JD</div>
                <div>
                    <h3 id="profile-name">João da Silva</h3>
                    <p id="profile-email">joao@email.com</p>
                </div>
            </div>
        </div>

        <div class="cycle-section">
            <div class="cycle-selector">
                <span>Ciclo Atual:</span>
                <div class="current-cycle" id="current-cycle">01/01/2023 - 31/01/2023</div>
                <button id="change-cycle-btn" class="btn-info">Alterar Ciclo</button>
            </div>
            
            <div class="cycle-info">
                <div class="cycle-dates">
                    <div class="cycle-date">
                        <div class="cycle-label">Início</div>
                        <div class="cycle-value" id="cycle-start">01/01/2023</div>
                    </div>
                    <div class="cycle-date">
                        <div class="cycle-label">Término</div>
                        <div class="cycle-value" id="cycle-end">31/01/2023</div>
                    </div>
                </div>
                <div class="cycle-progress">
                    <div class="cycle-label">Progresso</div>
                    <div class="progress-bar">
                        <div class="progress" style="width: 50%;"></div>
                    </div>
                    <div class="cycle-value">15 de 30 dias</div>
                </div>
            </div>
        </div>

        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Saldo do Ciclo</div>
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="card-value" id="saldo-total">R$ 0,00</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Total em Investimentos</div>
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="card-value neutral" id="total-investimentos">R$ 0,00</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Limite Disponível</div>
                    <i class="fas fa-credit-card"></i>
                </div>
                <div class="card-value" id="limite-disponivel">R$ 0,00</div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="transacoes">Transações</div>
            <div class="tab" data-tab="investimentos">Investimentos</div>
            <div class="tab" data-tab="cartao">Cartão de Crédito</div>
            <div class="tab" data-tab="futuro">Planejamento Futuro</div>
        </div>

        <div class="tab-content active" id="transacoes-tab">
            <div class="sections">
                <div class="left-section">
                    <div class="section">
                        <h2 class="section-title">Transações Financeiras</h2>
                        <div class="card">
                            <form id="transacao-form">
                                <div class="form-group">
                                    <label for="descricao">Descrição</label>
                                    <input type="text" id="descricao" placeholder="Ex: Salário, Aluguel, Supermercado" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="valor">Valor</label>
                                    <input type="number" id="valor" step="0.01" min="0.01" placeholder="0,00" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="categoria">Categoria</label>
                                    <select id="categoria" required>
                                        <option value="">Selecione uma categoria</option>
                                        <option value="receita">Receita</option>
                                        <option value="despesa">Despesa</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="data">Data</label>
                                    <input type="date" id="data" required>
                                </div>
                                
                                <button type="submit">Adicionar Transação</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="right-section">
                    <div class="card">
                        <h3>Transações do Ciclo</h3>
                        <div class="transactions" id="transacoes-list">
                            <div class="empty-message">Nenhuma transação cadastrada</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="investimentos-tab">
            <div class="sections">
                <div class="left-section">
                    <div class="section">
                        <h2 class="section-title">Controle de Investimentos</h2>
                        <div class="card">
                            <form id="investimento-form">
                                <div class="form-group">
                                    <label for="tipo-operacao">Tipo de Operação</label>
                                    <select id="tipo-operacao" required>
                                        <option value="aplicacao">Aplicação</option>
                                        <option value="resgate">Resgate</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="valor-investimento">Valor</label>
                                    <input type="number" id="valor-investimento" step="0.01" min="0.01" placeholder="0,00" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="data-investimento">Data</label>
                                    <input type="date" id="data-investimento" required>
                                </div>
                                
                                <button type="submit" class="btn-success">Registrar Operação</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="right-section">
                    <div class="card">
                        <h3>Histórico de Investimentos</h3>
                        <div class="transactions" id="investimentos-list">
                            <div class="empty-message">Nenhuma operação de investimento registrada</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="cartao-tab">
            <div class="sections">
                <div class="left-section">
                    <div class="section">
                        <h2 class="section-title">Controle de Cartão de Crédito</h2>
                        <div class="card">
                            <div class="credit-info">
                                <div>
                                    <div class="summary-title">Limite Total</div>
                                    <div class="summary-value" id="limite-total">R$ 0,00</div>
                                </div>
                                <div>
                                    <div class="summary-title">Disponível</div>
                                    <div class="summary-value" id="disponivel">R$ 0,00</div>
                                </div>
                            </div>
                            
                            <form id="limite-form">
                                <div class="form-group">
                                    <label for="novo-limite">Definir Limite do Cartão</label>
                                    <input type="number" id="novo-limite" step="0.01" min="0.01" placeholder="0,00" required>
                                </div>
                                <button type="submit" class="btn-success">Definir Limite</button>
                            </form>
                            
                            <hr style="margin: 20px 0;">
                            
                            <form id="compra-form">
                                <div class="form-group">
                                    <label for="descricao-compra">Descrição da Compra</label>
                                    <input type="text" id="descricao-compra" placeholder="Ex: Restaurante, Compras Online" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="valor-compra">Valor</label>
                                    <input type="number" id="valor-compra" step="0.01" min="0.01" placeholder="0,00" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="data-compra">Data</label>
                                    <input type="date" id="data-compra" required>
                                </div>
                                
                                <button type="submit" class="btn-warning">Registrar Compra</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="right-section">
                    <div class="card">
                        <h3>Compras no Cartão</h3>
                        <div class="transactions" id="compras-list">
                            <div class="empty-message">Nenhuma compra registrada</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="futuro-tab">
            <div class="sections">
                <div class="left-section">
                    <div class="section">
                        <h2 class="section-title">Planejamento Futuro</h2>
                        <div class="card">
                            <div class="future-toggle">
                                <div class="toggle-option active" data-type="despesa">Despesa Futura</div>
                                <div class="toggle-option" data-type="receita">Receita Futura</div>
                            </div>
                            
                            <form id="futuro-form">
                                <div class="form-group">
                                    <label for="descricao-futuro">Descrição</label>
                                    <input type="text" id="descricao-futuro" placeholder="Ex: Presente aniversário, Bônus salarial" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="valor-futuro">Valor</label>
                                    <input type="number" id="valor-futuro" step="0.01" min="0.01" placeholder="0,00" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="data-futuro">Data Prevista</label>
                                    <input type="date" id="data-futuro" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="status-futuro">Status</label>
                                    <select id="status-futuro">
                                        <option value="pendente">Pendente</option>
                                        <option value="confirmado">Confirmado</option>
                                    </select>
                                </div>
                                
                                <button type="submit" class="btn-future">Adicionar Planejamento</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="right-section">
                    <div class="future-summary">
                        <div class="future-summary-item">
                            <div class="future-summary-title">Receitas Futuras</div>
                            <div class="future-summary-value" id="total-receitas-futuras">R$ 0,00</div>
                        </div>
                        <div class="future-summary-item">
                            <div class="future-summary-title">Despesas Futuras</div>
                            <div class="future-summary-value" id="total-despesas-futuras">R$ 0,00</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>Previsões Futuras</h3>
                        <div class="transactions" id="futuro-list">
                            <div class="empty-message">Nenhum planejamento futuro</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de Perfil -->
        <div id="profile-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Meu Perfil</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="form-group">
                    <label for="profile-name-input">Nome</label>
                    <input type="text" id="profile-name-input" placeholder="Seu nome">
                </div>
                <div class="form-group">
                    <label for="profile-email-input">Email</label>
                    <input type="email" id="profile-email-input" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="profile-currency-select">Moeda</label>
                    <select id="profile-currency-select">
                        <option value="BRL">Real Brasileiro (R$)</option>
                        <option value="USD">Dólar Americano ($)</option>
                        <option value="EUR">Euro (€)</option>
                    </select>
                </div>
                <button id="save-profile-btn" class="btn-success">Salvar Alterações</button>
            </div>
        </div>

        <!-- Modal de Ciclo -->
        <div id="cycle-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Definir Ciclo Financeiro</h3>
                    <button class="close-modal">&times;</button>
                </div>
                <div class="form-group">
                    <label for="cycle-start-date">Data de Início</label>
                    <input type="date" id="cycle-start-date" required>
                </div>
                <div class="form-group">
                    <label for="cycle-end-date">Data de Término</label>
                    <input type="date" id="cycle-end-date" required>
                </div>
                <button id="save-cycle-btn" class="btn-success">Salvar Ciclo</button>
            </div>
        </div>
    </div>

    <script>
        // Dados iniciais
        let userData = {
            name: "",
            email: "",
            currency: "BRL",
            cycleStart: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0],
            cycleEnd: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).toISOString().split('T')[0]
        };

        let financialData = {
            transactions: [],
            investments: [],
            creditCard: {
                limit: 0,
                purchases: []
            },
            future: []
        };

        // Símbolos de moeda
        const currencySymbols = {
            'BRL': 'R$',
            'USD': '$',
            'EUR': '€'
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Verificar se há dados salvos
            const savedUserData = localStorage.getItem('userData');
            
            if (savedUserData) {
                userData = JSON.parse(savedUserData);
                showApp();
                
                // Carregar dados financeiros
                const savedFinancialData = localStorage.getItem('financialData');
                if (savedFinancialData) {
                    financialData = JSON.parse(savedFinancialData);
                }
                
                // Inicializar a data atual nos campos de data
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('data').value = today;
                document.getElementById('data-investimento').value = today;
                document.getElementById('data-compra').value = today;
                document.getElementById('data-futuro').value = today;
                document.getElementById('cycle-start-date').value = userData.cycleStart;
                document.getElementById('cycle-end-date').value = userData.cycleEnd;
                
                // Atualizar a interface
                updateProfileDisplay();
                updateCycleDisplay();
                loadFinancialData();
            } else {
                // Mostrar página de login
                document.getElementById('login-page').classList.remove('hidden');
            }
            
            // Event listeners
            document.getElementById('login-btn').addEventListener('click', handleLogin);
            document.getElementById('transacao-form').addEventListener('submit', handleAddTransaction);
            document.getElementById('investimento-form').addEventListener('submit', handleInvestmentOperation);
            document.getElementById('limite-form').addEventListener('submit', handleSetCreditLimit);
            document.getElementById('compra-form').addEventListener('submit', handleCreditPurchase);
            document.getElementById('futuro-form').addEventListener('submit', handleFuturePlanning);
            document.getElementById('profile-btn').addEventListener('click', showProfileModal);
            document.getElementById('save-profile-btn').addEventListener('click', saveProfile);
            document.getElementById('change-cycle-btn').addEventListener('click', showCycleModal);
            document.getElementById('save-cycle-btn').addEventListener('click', saveCycle);
            
            // Event listeners para tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remover classe active de todas as tabs
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    // Adicionar classe active à tab clicada
                    this.classList.add('active');
                    
                    // Esconder todos os conteúdos de tab
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    // Mostrar o conteúdo correspondente
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Event listener para alternância de tema
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
            
            // Event listeners para modais
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                });
            });
            
            // Fechar modal ao clicar fora dele
            window.addEventListener('click', function(event) {
                document.querySelectorAll('.modal').forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            });
            
            // Event listener para toggle de tipo futuro
            document.querySelectorAll('.toggle-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.toggle-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        });
        
        function handleLogin() {
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const currency = document.getElementById('user-currency').value;
            
            if (!name || !email) {
                document.getElementById('login-error').style.display = 'block';
                return;
            }
            
            document.getElementById('login-error').style.display = 'none';
            
            userData = {
                name,
                email,
                currency,
                cycleStart: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0],
                cycleEnd: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).toISOString().split('T')[0]
            };
            
            localStorage.setItem('userData', JSON.stringify(userData));
            showApp();
            updateProfileDisplay();
            updateCycleDisplay();
            
            // Inicializar a data atual nos campos de data
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('data').value = today;
            document.getElementById('data-investimento').value = today;
            document.getElementById('data-compra').value = today;
            document.getElementById('data-futuro').value = today;
        }
        
        function showApp() {
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('app-container').classList.remove('hidden');
        }
        
        function updateProfileDisplay() {
            document.getElementById('profile-name').textContent = userData.name;
            document.getElementById('profile-email').textContent = userData.email;
            
            // Criar avatar com iniciais
            const initials = userData.name.split(' ').map(n => n[0]).join('').toUpperCase();
            document.getElementById('profile-avatar').textContent = initials;
            
            // Atualizar inputs do perfil
            document.getElementById('profile-name-input').value = userData.name;
            document.getElementById('profile-email-input').value = userData.email;
            document.getElementById('profile-currency-select').value = userData.currency;
        }
        
        function updateCycleDisplay() {
            const startDate = new Date(userData.cycleStart);
            const endDate = new Date(userData.cycleEnd);
            const today = new Date();
            
            // Calcular progresso do ciclo
            const totalDays = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
            const daysPassed = Math.floor((today - startDate) / (1000 * 60 * 60 * 24)) + 1;
            const progressPercent = Math.min(100, Math.max(0, (daysPassed / totalDays) * 100));
            
            // Formatar datas
            const formatDate = (date) => {
                return date.toLocaleDateString('pt-BR');
            };
            
            document.getElementById('current-cycle').textContent = `${formatDate(startDate)} - ${formatDate(endDate)}`;
            document.getElementById('cycle-start').textContent = formatDate(startDate);
            document.getElementById('cycle-end').textContent = formatDate(endDate);
            
            // Atualizar barra de progresso
            document.querySelector('.progress').style.width = `${progressPercent}%`;
            document.querySelector('.cycle-progress .cycle-value').textContent = 
                `${daysPassed} de ${totalDays} dias`;
        }
        
        function loadFinancialData() {
            loadTransactions();
            loadInvestments();
            loadCreditCard();
            loadFuturePlanning();
            updateTotals();
        }
        
        function showProfileModal() {
            document.getElementById('profile-modal').style.display = 'flex';
        }
        
        function showCycleModal() {
            document.getElementById('cycle-start-date').value = userData.cycleStart;
            document.getElementById('cycle-end-date').value = userData.cycleEnd;
            document.getElementById('cycle-modal').style.display = 'flex';
        }
        
        function saveProfile() {
            userData.name = document.getElementById('profile-name-input').value;
            userData.email = document.getElementById('profile-email-input').value;
            userData.currency = document.getElementById('profile-currency-select').value;
            
            localStorage.setItem('userData', JSON.stringify(userData));
            updateProfileDisplay();
            updateTotals(); // Para atualizar os símbolos de moeda
            
            document.getElementById('profile-modal').style.display = 'none';
        }
        
        function saveCycle() {
            const startDate = document.getElementById('cycle-start-date').value;
            const endDate = document.getElementById('cycle-end-date').value;
            
            if (!startDate || !endDate) {
                alert('Por favor, preencha ambas as datas.');
                return;
            }
            
            if (new Date(startDate) >= new Date(endDate)) {
                alert('A data de início deve ser anterior à data de término.');
                return;
            }
            
            userData.cycleStart = startDate;
            userData.cycleEnd = endDate;
            
            localStorage.setItem('userData', JSON.stringify(userData));
            updateCycleDisplay();
            loadFinancialData(); // Recarregar para filtrar por ciclo
            
            document.getElementById('cycle-modal').style.display = 'none';
        }
        
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const icon = document.querySelector('.theme-toggle i');
            if (document.body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            }
        }
        
        function handleAddTransaction(e) {
            e.preventDefault();
            const description = document.getElementById('descricao').value;
            const amount = parseFloat(document.getElementById('valor').value);
            const category = document.getElementById('categoria').value;
            const date = document.getElementById('data').value;
            
            if (!description || isNaN(amount) || amount <= 0 || !category || !date) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }
            
            const transaction = {
                id: Date.now(),
                description,
                amount,
                category,
                date
            };
            
            financialData.transactions.push(transaction);
            saveFinancialData();
            loadTransactions();
            updateTotals();
            
            document.getElementById('transacao-form').reset();
            document.getElementById('data').value = new Date().toISOString().split('T')[0];
        }
        
        function loadTransactions() {
            const transactionsList = document.getElementById('transacoes-list');
            const cycleTransactions = financialData.transactions.filter(transaction => {
                return transaction.date >= userData.cycleStart && transaction.date <= userData.cycleEnd;
            });
            
            if (cycleTransactions.length === 0) {
                transactionsList.innerHTML = '<div class="empty-message">Nenhuma transação neste ciclo</div>';
                return;
            }
            
            // Ordenar por data (mais recente primeiro)
            cycleTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            transactionsList.innerHTML = '';
            cycleTransactions.forEach(transaction => {
                const transactionElement = document.createElement('div');
                transactionElement.classList.add('transaction-item');
                
                const amountFormatted = formatCurrency(transaction.amount);
                const dateFormatted = formatDate(transaction.date);
                
                transactionElement.innerHTML = `
                    <div class="transaction-desc">
                        <strong>${transaction.description}</strong>
                        <div>${dateFormatted}</div>
                    </div>
                    <div class="transaction-value ${transaction.category}">
                        ${transaction.category === 'receita' ? '+' : '-'} ${amountFormatted}
                    </div>
                    <div class="transaction-actions">
                        <button class="action-btn btn-danger" onclick="deleteTransaction(${transaction.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                transactionsList.appendChild(transactionElement);
            });
        }
        
        function deleteTransaction(id) {
            if (confirm('Tem certeza que deseja excluir esta transação?')) {
                financialData.transactions = financialData.transactions.filter(t => t.id !== id);
                saveFinancialData();
                loadTransactions();
                updateTotals();
            }
        }
        
        function formatCurrency(amount) {
            return `${currencySymbols[userData.currency]} ${amount.toFixed(2)}`;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        function saveFinancialData() {
            localStorage.setItem('financialData', JSON.stringify(financialData));
        }
        
        function updateTotals() {
            updateBalance();
            updateInvestments();
            updateCreditCard();
            updateFuturePlanning();
        }
        
        function updateBalance() {
            const cycleTransactions = financialData.transactions.filter(transaction => {
                return transaction.date >= userData.cycleStart && transaction.date <= userData.cycleEnd;
            });
            
            let balance = 0;
            cycleTransactions.forEach(transaction => {
                if (transaction.category === 'receita') {
                    balance += transaction.amount;
                } else {
                    balance -= transaction.amount;
                }
            });
            
            document.getElementById('saldo-total').textContent = formatCurrency(balance);
            document.getElementById('saldo-total').className = 'card-value ' + (balance >= 0 ? 'positive' : 'negative');
        }
        
        // Implementações para investimentos
        function handleInvestmentOperation(e) {
            e.preventDefault();
            const type = document.getElementById('tipo-operacao').value;
            const amount = parseFloat(document.getElementById('valor-investimento').value);
            const date = document.getElementById('data-investimento').value;
            
            if (isNaN(amount) || amount <= 0 || !date) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }
            
            const investment = {
                id: Date.now(),
                type,
                amount,
                date
            };
            
            financialData.investments.push(investment);
            saveFinancialData();
            loadInvestments();
            updateTotals();
            
            document.getElementById('investimento-form').reset();
            document.getElementById('data-investimento').value = new Date().toISOString().split('T')[0];
        }
        
        function loadInvestments() {
            const investmentsList = document.getElementById('investimentos-list');
            const cycleInvestments = financialData.investments.filter(investment => {
                return investment.date >= userData.cycleStart && investment.date <= userData.cycleEnd;
            });
            
            if (cycleInvestments.length === 0) {
                investmentsList.innerHTML = '<div class="empty-message">Nenhum investimento neste ciclo</div>';
                return;
            }
            
            // Ordenar por data (mais recente primeiro)
            cycleInvestments.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            investmentsList.innerHTML = '';
            cycleInvestments.forEach(investment => {
                const investmentElement = document.createElement('div');
                investmentElement.classList.add('transaction-item');
                
                const amountFormatted = formatCurrency(investment.amount);
                const dateFormatted = formatDate(investment.date);
                
                investmentElement.innerHTML = `
                    <div class="transaction-desc">
                        <strong>${investment.type === 'aplicacao' ? 'Aplicação' : 'Resgate'}</strong>
                        <div>${dateFormatted}</div>
                    </div>
                    <div class="transaction-value ${investment.type}">
                        ${investment.type === 'aplicacao' ? '+' : '-'} ${amountFormatted}
                    </div>
                    <div class="transaction-actions">
                        <button class="action-btn btn-danger" onclick="deleteInvestment(${investment.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                investmentsList.appendChild(investmentElement);
            });
            
            updateInvestmentsTotal();
        }
        
        function deleteInvestment(id) {
            if (confirm('Tem certeza que deseja excluir esta operação?')) {
                financialData.investments = financialData.investments.filter(i => i.id !== id);
                saveFinancialData();
                loadInvestments();
                updateTotals();
            }
        }
        
        function updateInvestmentsTotal() {
            let totalApplied = 0;
            let totalWithdrawn = 0;
            
            financialData.investments.forEach(investment => {
                if (investment.type === 'aplicacao') {
                    totalApplied += investment.amount;
                } else {
                    totalWithdrawn += investment.amount;
                }
            });
            
            const total = totalApplied - totalWithdrawn;
            
            document.getElementById('total-aplicado').textContent = formatCurrency(totalApplied);
            document.getElementById('total-retirado').textContent = formatCurrency(totalWithdrawn);
            document.getElementById('total-investimentos').textContent = formatCurrency(total);
            
            // Atualizar cor do total
            const totalElement = document.getElementById('total-investimentos');
            totalElement.className = 'card-value ' + (total >= 0 ? 'positive' : 'negative');
        }
        
        // Implementações para cartão de crédito
        function handleSetCreditLimit(e) {
            e.preventDefault();
            const limit = parseFloat(document.getElementById('novo-limite').value);
            
            if (isNaN(limit) || limit <= 0) {
                alert('Por favor, informe um valor válido para o limite.');
                return;
            }
            
            financialData.creditCard.limit = limit;
            saveFinancialData();
            updateCreditCard();
            
            document.getElementById('novo-limite').value = '';
        }
        
        function handleCreditPurchase(e) {
            e.preventDefault();
            const description = document.getElementById('descricao-compra').value;
            const amount = parseFloat(document.getElementById('valor-compra').value);
            const date = document.getElementById('data-compra').value;
            
            if (!description || isNaN(amount) || amount <= 0 || !date) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }
            
            const purchase = {
                id: Date.now(),
                description,
                amount,
                date
            };
            
            financialData.creditCard.purchases.push(purchase);
            saveFinancialData();
            loadCreditCard();
            updateCreditCard();
            
            document.getElementById('compra-form').reset();
            document.getElementById('data-compra').value = new Date().toISOString().split('T')[0];
        }
        
        function loadCreditCard() {
            const purchasesList = document.getElementById('compras-list');
            const cyclePurchases = financialData.creditCard.purchases.filter(purchase => {
                return purchase.date >= userData.cycleStart && purchase.date <= userData.cycleEnd;
            });
            
            if (cyclePurchases.length === 0) {
                purchasesList.innerHTML = '<div class="empty-message">Nenhuma compra neste ciclo</div>';
                return;
            }
            
            // Ordenar por data (mais recente primeiro)
            cyclePurchases.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            purchasesList.innerHTML = '';
            cyclePurchases.forEach(purchase => {
                const purchaseElement = document.createElement('div');
                purchaseElement.classList.add('transaction-item');
                
                const amountFormatted = formatCurrency(purchase.amount);
                const dateFormatted = formatDate(purchase.date);
                
                purchaseElement.innerHTML = `
                    <div class="transaction-desc">
                        <strong>${purchase.description}</strong>
                        <div>${dateFormatted}</div>
                    </div>
                    <div class="transaction-value saida">
                        - ${amountFormatted}
                    </div>
                    <div class="transaction-actions">
                        <button class="action-btn btn-danger" onclick="deletePurchase(${purchase.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                purchasesList.appendChild(purchaseElement);
            });
        }
        
        function deletePurchase(id) {
            if (confirm('Tem certeza que deseja excluir esta compra?')) {
                financialData.creditCard.purchases = financialData.creditCard.purchases.filter(p => p.id !== id);
                saveFinancialData();
                loadCreditCard();
                updateCreditCard();
            }
        }
        
        function updateCreditCard() {
            let totalSpent = 0;
            financialData.creditCard.purchases.forEach(purchase => {
                totalSpent += purchase.amount;
            });
            
            const available = financialData.creditCard.limit - totalSpent;
            
            document.getElementById('limite-total').textContent = formatCurrency(financialData.creditCard.limit);
            document.getElementById('disponivel').textContent = formatCurrency(available);
            document.getElementById('limite-disponivel').textContent = formatCurrency(available);
            
            // Atualizar cor do limite disponível
            const disponivelElement = document.getElementById('limite-disponivel');
            disponivelElement.className = 'card-value ' + (available >= 0 ? 'positive' : 'negative');
        }
        
        function updateInvestments() {
            updateInvestmentsTotal();
        }
        
        // Implementações para planejamento futuro
        function handleFuturePlanning(e) {
            e.preventDefault();
            const description = document.getElementById('descricao-futuro').value;
            const amount = parseFloat(document.getElementById('valor-futuro').value);
            const date = document.getElementById('data-futuro').value;
            const status = document.getElementById('status-futuro').value;
            
            // Obter o tipo selecionado (despesa ou receita)
            const type = document.querySelector('.toggle-option.active').getAttribute('data-type');
            
            if (!description || isNaN(amount) || amount <= 0 || !date) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }
            
            const futureItem = {
                id: Date.now(),
                description,
                amount,
                type,
                date,
                status
            };
            
            financialData.future.push(futureItem);
            saveFinancialData();
            loadFuturePlanning();
            updateFuturePlanning();
            
            document.getElementById('futuro-form').reset();
            document.getElementById('data-futuro').value = new Date().toISOString().split('T')[0];
        }
        
        function loadFuturePlanning() {
            const futureList = document.getElementById('futuro-list');
            
            if (financialData.future.length === 0) {
                futureList.innerHTML = '<div class="empty-message">Nenhum planejamento futuro</div>';
                return;
            }
            
            // Ordenar por data (mais próxima primeiro)
            financialData.future.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            futureList.innerHTML = '';
            financialData.future.forEach(item => {
                const futureElement = document.createElement('div');
                futureElement.classList.add('transaction-item');
                
                const amountFormatted = formatCurrency(item.amount);
                const dateFormatted = formatDate(item.date);
                const statusClass = item.status === 'pendente' ? 'status-pending' : 'status-completed';
                
                futureElement.innerHTML = `
                    <div class="transaction-desc">
                        <strong>${item.description}</strong>
                        <div>${dateFormatted} <span class="status-badge ${statusClass}">${item.status === 'pendente' ? 'Pendente' : 'Confirmado'}</span></div>
                    </div>
                    <div class="transaction-value ${item.type}">
                        ${item.type === 'receita' ? '+' : '-'} ${amountFormatted}
                    </div>
                    <div class="transaction-actions">
                        <button class="action-btn btn-danger" onclick="deleteFutureItem(${item.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                futureList.appendChild(futureElement);
            });
        }
        
        function deleteFutureItem(id) {
            if (confirm('Tem certeza que deseja excluir este planejamento?')) {
                financialData.future = financialData.future.filter(f => f.id !== id);
                saveFinancialData();
                loadFuturePlanning();
                updateFuturePlanning();
            }
        }
        
        function updateFuturePlanning() {
            let totalReceitas = 0;
            let totalDespesas = 0;
            
            financialData.future.forEach(item => {
                if (item.type === 'receita') {
                    totalReceitas += item.amount;
                } else {
                    totalDespesas += item.amount;
                }
            });
            
            document.getElementById('total-receitas-futuras').textContent = formatCurrency(totalReceitas);
            document.getElementById('total-despesas-futuras').textContent = formatCurrency(totalDespesas);
        }
        
        // Inicializar tema salvo
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            const icon = document.querySelector('.theme-toggle i');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        }
    </script>
</body>
</html>
